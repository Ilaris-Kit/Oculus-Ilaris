<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Oculus Ilaris</title>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,800" crossorigin="anonymous">
  <script src='../js/download.js'></script>
  <script src="../js/local.js"></script>
  <script src="../js/ilaris.js"></script>
  <script src="../js/character.js"></script>
  <script src="../js/ui.js"></script>

  <style>

  h1, h5 {
    font-family: "Open Sans Condensed";
    font-weight: bolder;
  }

  #FTABLE,  #MULTIVIEW-PFTABLE,  #currentCharacter, li.nav-item {

    font-family: "Open Sans Condensed";
    font-size: 140%;
  }



  li.nav-item {
    font-weight: bolder;
  }



  .probenwertWrapper {
    display: inline-block;
    position: relative;
    text-align: center;
  }


  .probenwert{
    display: table-cell;
    padding: 0rem;
    padding-right: 1.3rem;
    padding-left: 1.3rem;
    height: 2rem;
    text-align: center;
    vertical-align: middle;
    font-weight: bolder;
  }

  .isTalent:before {
    content: "T";
  }
  .isFertigkeit:before {
    content: "F";
  }

  .isSelected:before {
    content: "T✓";
    letter-spacing: 2px;
    white-space: nowrap;
  }
  .notSelected:before {
    content: "T";
  }
  .hasVorteil:before {
    content: "V";
  }
  .hasEigenheit:before {
    content: "E";
  }


  .table td, .table th {
    vertical-align: middle;
  }


  .indicator:before {
    padding: 0;
    margin: 0;
    position: absolute;
    font-size: 60%;
    font-weight: bolder;
    width: 1rem;
    height: 1rem;
  }

  .indicator-top:before {
    top: 0px;
  }
  .indicator-right:before {
    right: 3px;
    text-align: left;
  }
  .indicator-bottom:before {
    bottom: 0px;
  }
  .indicator-left:before {
    left: 3px;
    text-align: right;
  }


  th.cat-p:before {
    content: "";
    position: absolute;
    left: 0;
    top: 0;
  }

  .iconWrapper {
    display: table;
    margin: auto;
    position: relative;
    text-align: center;
  }

  .icon {
    width: 2.5rem;
    height: 2.5rem;
    display: table-cell;
    vertical-align: middle;
    background-position: 50% 50%;
    background-repeat: no-repeat;
  }

  .icon-K {
    background-image: url("../icons/sword.svg");
  }
  .icon-U {
    background-image: url("../icons/wand.svg");
  }
  .icon-Athletik {
    background-image: url("../icons/runner.svg");
  }
  .icon-Wahrnehmung {
    background-image: url("../icons/eye.svg");
  }
  .icon-Beeinflussung {
    background-image: url("../icons/puppeteer.svg");
  }
  .icon-Derekunde {
    background-image: url("../icons/world.svg");
  }
  .icon-Autorität {
    background-image: url("../icons/fist.svg");
  }
  .icon-Alchemie {
    background-image: url("../icons/cauldron.svg");
  }
  .icon-Magiekunde {
    background-image: url("../icons/magic-book.svg");
  }
  .icon-Überleben {
    background-image: url("../icons/bonfire.svg");
  }
  .icon-Selbstbeherrschung {
    background-image: url("../icons/meditation.svg");
  }
  .icon-Heilkunde {
    background-image: url("../icons/hospital.svg");
  }
  .icon-Gebräuche {
    background-image: url("../icons/cutlery.svg");
  }
  .icon-Handwerk {
    background-image: url("../icons/hammer.svg");
  }
  .icon-Mythenkunde {
    background-image: url("../icons/myth-book.svg");
  }
  .icon-Heimlichkeit {
    background-image: url("../icons/agent.svg");
  }
  .icon-Verschlagenheit {
    background-image: url("../icons/criminal.svg");
  }

  #tsa-table-copyrightNoticeIcons  img {
    height: 1rem;
  }
  #tsa-table-copyrightNoticeIcons  {
    display:none;
  }
  .table {
    margin-left: auto !important;
    margin-right: auto !important;
  }


  .currentCharacterLabel {
    font-weight: bolder;
    font-family: "Open Sans Condensed";
  }
  body {
    font-family: "Open Sans";
  }


  .currentCharacterLabel.ul {
    background: red;
  }

  .importantHide {
    display: none !important;
  }

  #characterList {
    font-weight: bolder;
    font-family: "Open Sans Condensed";
    font-size: 140%;
    height: 3rem;
  }

  #dropDownMenu {
    font-weight: bolder;
    font-family: "Open Sans Condensed";
    font-size: 140%;
    height: 3rem;
  }  </style>

</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-12">
        <p>
          <h1>Oculus Ilaris</h1>
        </p>
        <div class="d-none" id="menu">
          <form style="margin-bottom: 1rem;">
            <div class="form-group">
              <span class="text-muted" id="helpText">Füge einen Charakter hinzu, um durchzustarten. Falls Du noch keinen hast, erstelle einen mit dem <a target="_blank" href="https://github.com/Aeolitus/Sephrasto">Sephrasto-Tool</a>.</span>
            </div>
          <div class="form-group">
              <button id="addCharacterButtonLong" type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" >
                Charakter hinzufügen...
              </button>
            </div>
            <div class="input-group d-none" id="characterManager">
              <span class="input-group-addon d-none">
                Charakter
              </span>
              <span class="input-group-btn">
                <button id="addCharacterButton" type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" style="width: 3rem;">
                  +
                </button>
              </span>
              <select id="characterList" class="custom-select form-control"></select>
              <span class="input-group-btn">
                <button type="button" class="btn btn-danger" id="deleteCharacterButton" style="width: 3rem;">－</button>
              </span>
            </div>
            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="addFileModal">Charakter hinzufügen</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <label class="custom-file" id="fileInputWrapper">
                      <form>
                        <input type="file" id="fileInput" class="custom-file-input">
                        <span class="custom-file-control"></span><br>
                      </label>
                      <span id="fileInputLabel" style="display: none;"></span>
                    </form>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" id="cancelUploadCharacter">Abbrechen</button>
                    <button type="button" class="btn btn-primary" id="uploadCharacter" data-dismiss="modal" disabled>Hinzufügen</button>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="col-12">
        <div class="d-none" id="navigation">

          <ul class="nav nav-tabs d-none d-lg-flex" id="tsa-tablist" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="tsa-tab-single-sheet" data-toggle="tab" href="#tsa-single-sheet" role="tab" aria-controls="Charakter Sheet" aria-selected="true">Charakterbogen</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="tsa-tab-single-fertigkeiten" data-toggle="tab" href="#tsa-single-fertigkeiten" role="tab" aria-controls="Fertigkeiten Übersicht" aria-selected="false">Profane Fertigkeiten</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="tsa-tab-multi-pfertigkeiten" data-toggle="tab" href="#tsa-multi-pfertigkeiten" role="tab" aria-controls="Multiview Fertigkeiten Übersicht" aria-selected="false">Multiview: Profane Fertigkeiten</a>
            </li>
          </ul>
          <form class="d-block d-lg-none">
            <div class="form-group">
              <select id="dropDownMenu" class="custom-select form-control">
                <option value="#tsa-tab-single-sheet" selected>Charakterbogen</a>
                  <option value="#tsa-tab-single-fertigkeiten">Profane Fertigkeiten</a>
                    <option value="#tsa-tab-multi-pfertigkeiten">Multiview: Profane Fertigkeiten</a>
                    </select>
                  </div>
                </form>
              </div>
            </div>

          </div>

          <div class="row">
            <div class="col-12">

              <div class="tab-content importantHide" id="tsa-tabcontent">

                <div class="tab-pane fade show active" id="tsa-single-sheet" role="tabpanel" aria-labelledby="tsa-tab-single-sheet">
                  <div id="currentCharacter">
                    <div id="currentCharacterAllgemeineInfos">
                      <span class="currentCharacterLabel">Name</span><span id="currentCharacterName"></span>
                      <span class="currentCharacterLabel">Rasse</span><span id="currentCharacterRasse"></span>
                      <span class="currentCharacterLabel">Status</span><span id="currentCharacterStatus"></span>
                      <span class="currentCharacterLabel">Kurzbeschreibung</span><span id="currentCharacterKurzbeschreibung"></span>
                      <span class="currentCharacterLabel">Heimat</span><span id="currentCharacterHeimat"></span>
                      <span class="currentCharacterLabel">Finanzen</span><span id="currentCharacterFinanzen"></span>
                      <span class="currentCharacterLabel">Eigenheiten</span><ul id="currentCharacterEigenheiten"></ul>
                      <span class="currentCharacterLabel">EP</span><span id="currentCharacterEPspent"></span>/<span id="currentCharacterEPtotal"></span>
                    </div>
                    <div id="currentCharacterVorteile">
                      <span class="currentCharacterLabel">Vorteile</span><ul id="currentCharacterVorteileListe"></ul>
                    </div>
                    <div id="currentCharacterFertigkeiten">
                      <span class="currentCharacterLabel">Profane Fertigkeiten</span><ul id="currentCharacterPFertigkeiten"></ul>
                      <span class="currentCharacterLabel">Kampf-Fertigkeiten mit FW > 0</span><ul id="currentCharacterKFertigkeiten"></ul>
                      <span class="currentCharacterLabel">Übernatürliche Fertigkeiten mit FW > 0</span><ul id="currentCharacterUFertigkeiten"></ul>
                    </div>
                    <div id="currentCharacterTalente">
                      <span class="currentCharacterLabel">Übersicht profane Fertigkeiten und Talente</span><ul id="currentCharacterPTalente"></ul>
                    </div>
                  </div>
                </div>
                <div class="tab-pane fade" id="tsa-single-fertigkeiten" role="tabpanel" aria-labelledby="tsa-tab-single-fertigkeiten">

                  <table class="table table-sm table-hover table-striped table-responsive-sm" id="FTABLE">
                    <thead class="thead-dark">
                    </thead>
                    <tbody>

                    </tbody>
                  </table>
                </div>

                <div class="tab-pane fade" id="tsa-multi-pfertigkeiten" role="tabpanel" aria-labelledby="tsa-tab-multi-pfertigkeiten">
                  <table class="table table-sm table-hover table-striped table-responsive-sm" id="MULTIVIEW-PFTABLE">
                    <thead class="thead-dark">
                    </thead>
                    <tbody>

                    </tbody>
                  </table>
                </div>


              </div>
            </div>
          </div>
        </div>
        <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" crossorigin="anonymous"></script>


        <script>

        $(document).ready(function() {
          initializeIlaris(function() {
            UIinitialize();
            console.log("Ilaris initialized");
            $( "#characterList" ).change( function( event ) {
              UIcreateFertigkeitenTable($("#characterList").val());
            } );

          });

        });
        </script>
        <hr>
        <div class="container" id="maintenance" class="d-none">
          <h5>Wartungsfunktionen</h5>
          <p><span class="badge badge-danger">Achtung</span> Funktionen werden ohne Warnung ausgeführt.</p>
          <button type="button" class="btn btn-sm btn-warning" id="rebuildButton">Rebuild Database</button>
          <button type="button" class="btn btn-sm btn-danger" id="deleteAllButton">Delete Characters</button>
          <button type="button" class="btn btn-sm btn-primary" id="downloadButton">Download local storage as JSON</button>
          <label for="fileInputLS">Restore local session from JSON file</label> <input type="file" class="form-control-file" id="fileInputLS">

        </div>


        <footer class="footer container" id="tsa-icon-copyrights" >
          <strong><a href="#tsa-table-copyrightNoticeIcons">All icons used under Creative Commons. Click to toggle attributions.</a></strong>
          <table class="table table-sm" id="tsa-table-copyrightNoticeIcons">
            <tr><td><img src="../icons/cutlery.svg"></td><td>Created by Hopkins from the Noun Project</td></tr>
            <tr><td><img src="../icons/meditation.svg"></td><td>Created by yasminvisible from the Noun Project</td></tr>
            <tr><td><img src="../icons/fist.svg"></td><td>Created by Isabel Foo from the Noun Project</td></tr>
            <tr><td><img src="../icons/agent.svg"></td><td>Created by Setyo Ari Wibowo from the Noun Project</td></tr>
            <tr><td><img src="../icons/bonfire.svg"></td><td>Created by Setyo Ari Wibowo from the Noun Project</td></tr>
            <tr><td><img src="../icons/cauldron.svg"></td><td>Created by Vectors Market from the Noun Project</td></tr>
            <tr><td><img src="../icons/hospital.svg"></td><td>Created by UNiCORN from the Noun Project</td></tr>
            <tr><td><img src="../icons/world.svg"></td><td>Created by Aleksandr Vector from the Noun Project</td></tr>
            <tr><td><img src="../icons/puppeteer.svg"></td><td>Created by Luis Prado from the Noun Project</td></tr>
            <tr><td><img src="../icons/runner.svg"></td><td>Created by Gregor Cresnar from the Noun Project</td></tr>
            <tr><td><img src="../icons/myth-book.svg"></td><td>Created by IconfactoryTeam from the Noun Project</td></tr>
            <tr><td><img src="../icons/hammer.svg"></td><td>Created by Thomas' designs from the Noun Project</td></tr>
            <tr><td><img src="../icons/eye.svg"></td><td>Created by Edward Boatman from the Noun Project</td></tr>
            <tr><td><img src="../icons/wand.svg"></td><td>Created by Matthew R. Miller from the Noun Project</td></tr>
            <tr><td><img src="../icons/criminal.svg"></td><td>Created by Gregor Cresnar from the Noun Project</td></tr>
            <tr><td><img src="../icons/sword.svg"></td><td>Created by Postcat from the Noun Project</td></tr>
            <tr><td><img src="../icons/magic-book.svg"></td><td>Created by mbok sumirna from the Noun Project</td></tr>
          </table>
        </footer>

        <!-- Modal -->
        <div class="modal fade" id="rollTheDiceModal" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header" id="rollTheDiceModalHeader">
                <h5 class="modal-title" id="rollTheDiceModalHeaderH">Roll the dice...</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="rollTheDiceModalBody">

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="deletionModal" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header" id="deletionModalHeader">
                <h5 class="modal-title" id="deletionModalHeaderH"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="deletionModalBody">

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Abbrechen</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal" id="confirmDeletionButton">Löschen</button>
              </div>
            </div>
          </div>
        </div>

        </script>
      </body>
      </html>
